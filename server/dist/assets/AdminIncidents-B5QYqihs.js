import{G as m,r as o,j as e,L as j}from"./index-DHdrx00N.js";/* empty css                   */const i="http://localhost:3000",y=()=>{const{user:x,token:n}=m(),[r,u]=o.useState(n),[l,d]=o.useState([]),a=async()=>{try{const s={method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}},t=await fetch(`${i}/api/admin/getAllIncidents`,s);console.log("Token from admin",r);const c=await t.json();console.log("Data from admin",c),d(c)}catch(s){console.error("Error fetching incidents: ",s)}},h=async s=>{try{const t={method:"DELETE",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}};(await fetch(`${i}/api/admin/deleteIncident/${s}`,t)).ok&&a()}catch(t){console.error("Error deleting incident: ",t)}};return o.useEffect(()=>{n&&a()},[n]),e.jsxs("section",{className:"admin-users-section",children:[e.jsx("div",{className:"container",children:e.jsx("h1",{children:"Incidents Data"})}),e.jsx("div",{className:"container admin-users",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{class:"username-column",children:"User Name"}),e.jsx("th",{class:"category-column",children:"Category"}),e.jsx("th",{class:"description-column",children:"Description"}),e.jsx("th",{class:"date-column",children:"Date"}),e.jsx("th",{class:"time-column",children:"Time"}),e.jsx("th",{class:"location-column",children:"Location"}),e.jsx("th",{class:"update-column",children:"Update"}),e.jsx("th",{class:"delete-column",children:"Delete"})]})}),e.jsx("tbody",{children:l.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.user.userName}),e.jsx("td",{children:s.category}),e.jsx("td",{children:s.description}),e.jsx("td",{children:s.date.split("T")[0]}),e.jsx("td",{children:s.time}),e.jsxs("td",{children:[s.location.coordinates[0],", ",s.location.coordinates[1]]}),e.jsx("td",{children:e.jsx(j,{to:`/admin/incidents/${s._id}/edit`,className:"edit-delete",children:e.jsx("button",{className:"edit-delete",children:"Edit"})})}),e.jsx("td",{children:e.jsx("button",{className:"edit-delete",onClick:()=>h(s._id),children:"Delete"})})]},t))})]})})]})};export{y as default};
