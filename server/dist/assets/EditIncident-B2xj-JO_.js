import{Y as m,G as g,r as l,E as x,j as e}from"./index-DHdrx00N.js";/* empty css                 */const u="http://localhost:3000",f=()=>{const{id:r}=m(),{token:c}=g(),[n,d]=l.useState({description:"",category:"mistreatment",date:"",time:"",latitude:"",longitude:""}),p=x();l.useEffect(()=>{(async()=>{try{const i={method:"GET",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}},t=await(await fetch(`${u}/api/admin/getIncident/${r}`,i)).json();d({description:t.description,category:t.category,date:t.date.split("T")[0],time:t.time,latitude:t.location.coordinates[1],longitude:t.location.coordinates[0],name:t.userName})}catch(i){console.error("Error fetching incident details: ",i)}})()},[r,c]);const a=s=>{const{name:i,value:o}=s.target;d(t=>({...t,[i]:o}))},h=async s=>{s.preventDefault();const i={...n,location:{type:"Point",coordinates:[n.longitude,n.latitude]}};try{const o={method:"PATCH",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify(i)};(await fetch(`${u}/api/admin/updateIncident/${r}`,o)).ok&&p("/admin/incidents")}catch(o){console.error("Error updating incident details: ",o)}};return e.jsx("section",{className:"edit-incident-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:"Edit Incident"}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("label",{children:["Description:",e.jsx("textarea",{type:"text",name:"description",value:n.description,onChange:a,required:!0})]}),e.jsxs("label",{children:["Category:",e.jsxs("select",{name:"category",value:n.category,onChange:a,required:!0,children:[e.jsx("option",{value:"mistreatment",children:"Mistreatment"}),e.jsx("option",{value:"hooligans",children:"Hooligans"}),e.jsx("option",{value:"cat-calling",children:"Cat-calling"}),e.jsx("option",{value:"shady-area",children:"Shady Area"})]})]}),e.jsxs("label",{children:["Date:",e.jsx("input",{type:"date",name:"date",value:n.date,onChange:a,required:!0})]}),e.jsxs("label",{children:["Time:",e.jsx("input",{type:"time",name:"time",value:n.time,onChange:a,required:!0})]}),e.jsxs("label",{children:["Latitude:",e.jsx("input",{type:"text",name:"latitude",value:n.latitude,onChange:a,required:!0})]}),e.jsxs("label",{children:["Longitude:",e.jsx("input",{type:"text",name:"longitude",value:n.longitude,onChange:a,required:!0})]}),e.jsx("button",{type:"submit",children:"Update Incident"})]})]})})};export{f as default};
